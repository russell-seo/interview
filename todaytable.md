  
  # 오늘식탁(스타트업 면접 질문)
  
  ## 1. 인덱스란? 왜인덱스를 쓸때 좋은가? 검색이 왜빨라지는가?
    
   - 인덱스란?
      - 인덱스는 검색 속도를 향상 시켜주는 자료구조 이다.
      - 인덱스는 어떤 데이터가 어느 위치에 있는지에 대한 정보를 가진 주소록과 같다.
      - 데이터 - ROWID(주소)쌍으로 저장되어 있다.
      - 일반적인 select 쿼리 실행 시 먼저 메모리의 database buffer cache를 체크한다.
      - buffer cache에는 자주 사용되는 테이블들이 캐싱되어 있어 여기에 데이터가 있을 경우 바로 찾아 출력하고 없을 경우 하드디스크에 있는 데이터 파일에서 데이터를 찾는다.
      - 인덱스를 사용하면 이런 과정을 거치지 않고 바로 주소를 통해 찾아간다.

   - 인덱스의 동작원리?
      - 데이터 파일의 블록이 10만개가 있다고 가정할때 select문 실행시
      - server process 가 구문분석과정을 마친 후 database buffer cache 조건에 부합하는 데이터가 있는지 확인
      - 해당 정보가 buffer cahce에 없다면 디스크 파일에서 조건에 부합하는 블럭을 찾아 database buffer cache에 가져온 뒤 사용자에게 보여줌.
      - 이 경우 인덱스가 없으면 10만개 전부 database buffer cache에 조건에 부합하는 데이터가 있는지 확인
      - 인덱스가 있으면 where 절의 조건의 컬럼이 index의 키로 생성되어 있는지 확인 한 뒤 인덱스에 먼저 가서 조건에 부합하는 정보가 어떤 ROWID를 가지고 있는지 확인 후 ROWID에 있는 블럭을 찾아가 해당 블럭한 buffer cache에 복사.
    
  ## 2. JPA 카다시안 곱 문제를 부딪힌적 있는가?
  
  ## 3. JPA N+1 문제에 대해
  
  ## 4. 트랜잭션 어떨때 사용하나? 왜? 사용하나, 그냥 업데이트 해도 되는데 왜?
      
   - 트랜잭션 이란 Query의 실행을 보장하기 위해서 사용한다.
   - 여러 Query가 연속적으로 실행되는 와중에 문제가 생긴다면, 실행된 Query 까지만 DBMS에 반영되고 그 이후론 반영되지 않는다.
   - 문제는 Query가 실행되다가 오류가 생기면 이후의 query는 실행되지 못 한 채 끝나버린다. 

   - 왜? 그리고 언제사용하는가?
      > DB tables을 정규화에 의해 나누다 보면 테이블이 아주 잘개잘개 쪼개진다. 테이블이 잘개잘개 쪼개진다는 것은 하나의 데이터를 바꿀 때 그만큼 수정해줘야 하는 테이블도 많다는 것.
      > 그럼 이 모든 table을 수정해주기 위해 여러 쿼리를 실행해야 한다.
      > 예를 들어, 게시글을 삭제한다고 생각해보자.
      > 먼저 게시글을 위해서 테이블을 다음과 같이 만들었다고 가정하자.
      > articles - 게시글에 대한 데이터, comments - 댓글에 대한 데이터, attachments - 게시글에 들어간 첨부파일 목록

   - 이 상황에서 하나의 게시글을 삭제한다면 게시글에 들어간 첨부파일 다 삭제하고, 목록삭제하고, 댓글삭제하고 게시글을 삭제해야한다. 이것만 해도 쿼리가 여러개 날라간다.
   - 댓글을 삭제하는 와중에 무슨 원인이든 에러가 발생했다고 하면 게시글은 살아있고 댓글, 첨부파일은 다 날라간 상황이다. 이러한 상황을 위해 트랜잭션을 사용하는 것이다.

   - 필자가 가장 중요한 부분이라고 생각하는 점
      > DB table 의 데이터에 변화를 주는데 한번에 여러쿼리를 실행할때 사용한다.
      > 1. 즉 select문에서 트랜잭션을 사용할 필요가 없다는 것.
      > 2. select 문이 아닌 다른 DML은 여러 개를 한번에 실행할 때 트랜잭션을 사용한다는 것. select문은 데이터에 변화를 주는게 아니다. 변화가 없으니 에러가 발생해도 data 차원에선 문제가 없다.
      > 또 INSERT, UPDATE, DELETE를 하나만 실행할 때도 문제가 되지 않는다. 하나만 실행하는데 중간에 에러가 발생하면 에러가 난 것을 수정하고 다시 실행하게 하면 된다.
      > 3. 결국 CRUD의 READ를 제외한 DML을 여러개 쓸 때 사용한다는 것 만 알고 있으면 된다.
      

  ## 5. 검색 관련 Order by
  ## 6. ElasticSearch 관련
  ## 7. PK랑 Unique index 차이
